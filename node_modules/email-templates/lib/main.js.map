{"version":3,"sources":["../src/main.js"],"names":[],"mappings":";;;;;;;;oBAA8B,QAAQ;;sBACb,QAAQ;;6BACP,kBAAkB;;;;qBAC1B,OAAO;;;;oBACF,MAAM;;2BACN,aAAa;;AAEpC,IAAM,KAAK,GAAG,wBAAM,yBAAyB,CAAC,CAAA;;AAE9C,SAAS,UAAU,CAAE,iBAAiB,EAAE,OAAO,EAAE,IAAI,EAAE;AACrD,MAAI,YATE,UAAU,EASD,OAAO,CAAC,EAAE;AACvB,QAAI,GAAG,OAAO,CAAA;AACd,WAAO,GAAG,EAAE,CAAA;GACb;AACD,MAAI,CAAC,iBAAiB,EAAE;AACtB,WAAO,IAAI,CAAC,IAAI,KAAK,CAAC,gCAAgC,CAAC,CAAC,CAAA;GACzD;;AAED,SAAO,UAlBD,eAAe,EAkBE,iBAAiB,EAAE,UAAU,GAAG,EAAE;AACvD,QAAI,GAAG,EAAE,OAAO,IAAI,CAAC,GAAG,CAAC,CAAA;AACzB,SAAK,CAAC,gCAAgC,EAAE,UAhBpC,QAAQ,EAgBqC,iBAAiB,CAAC,CAAC,CAAA;AACpE,WAAO,IAAI,CAAC,IAAI,EAAE,QAAQ,CAAC,iBAAiB,EAAE,OAAO,CAAC,CAAC,CAAA;GACxD,CAAC,CAAA;CACH;;AAED,SAAS,QAAQ,CAAE,iBAAiB,EAAE,OAAO,EAAE;AAC7C,SAAO,SAAS,SAAS,CAAE,SAAS,EAAE,MAAM,EAAE,QAAQ,EAAE;AACtD,QAAI,YA1BA,UAAU,EA0BC,MAAM,CAAC,EAAE;AACtB,cAAQ,GAAG,MAAM,CAAA;AACjB,YAAM,GAAG,EAAE,CAAA;KACZ;AACD,QAAI,SAAS,IAAI,IAAI,EAAE;AACrB,aAAO,QAAQ,CAAC,IAAI,KAAK,CAAC,8BAA8B,CAAC,CAAC,CAAA;KAC3D;;AAED,QAAI,EAAE,GAAG,oCAAqB,iBAAiB,SAAI,SAAS,EAAI,OAAO,CAAC,CAAA;AACxE,QAAI,MAAM,KAAK,IAAI,EAAE;AACnB,aAAO,QAAQ,CAAC,IAAI,EAAE,UAAU,MAAM,EAAE,GAAG,EAAE,IAAI,EAAE;AACjD,UAAE,CAAC,MAAM,CAAC,MAAM,EAAE,UAAU,GAAG,EAAE,MAAM,EAAE;AACvC,gBAAM,GAAG,MAAM,IAAI,EAAE,CAAA;AACrB,cAAI,CAAC,GAAG,EAAE,MAAM,CAAC,IAAI,EAAE,MAAM,CAAC,IAAI,CAAC,CAAA;SACpC,CAAC,CAAA;OACH,CAAC,CAAA;KACH;;AAED,MAAE,CAAC,MAAM,CAAC,MAAM,EAAE,UAAU,GAAG,EAAE,MAAM,EAAE;AACvC,YAAM,GAAG,MAAM,IAAI,EAAE,CAAA;AACrB,cAAQ,CAAC,GAAG,EAAE,MAAM,CAAC,IAAI,EAAE,MAAM,CAAC,IAAI,CAAC,CAAA;KACxC,CAAC,CAAA;GACH,CAAA;CACF;;AAED,UAAU,CAAC,aAAa,6BAAgB,CAAA;AACxC,UAAU,CAAC,QAAQ,gBAhDX,QAAQ,AAgDc,CAAA;;qBAEf,UAAU","file":"main.js","sourcesContent":["import {ensureDirectory} from './util'\nimport {isFunction} from 'lodash'\nimport EmailTemplate from './email-template'\nimport Debug from 'debug'\nimport {basename} from 'path'\nimport {requires} from 'consolidate'\n\nconst debug = Debug('email-templates:creator')\n\nfunction exportable (templateDirectory, options, done) {\n  if (isFunction(options)) {\n    done = options\n    options = {}\n  }\n  if (!templateDirectory) {\n    return done(new Error('templateDirectory is undefined'))\n  }\n\n  return ensureDirectory(templateDirectory, function (err) {\n    if (err) return done(err)\n    debug('Creating Email Templates in %s', basename(templateDirectory))\n    return done(null, template(templateDirectory, options))\n  })\n}\n\nfunction template (templateDirectory, options) {\n  return function _template (directory, locals, callback) {\n    if (isFunction(locals)) {\n      callback = locals\n      locals = {}\n    }\n    if (directory == null) {\n      return callback(new Error('templateName was not defined'))\n    }\n\n    var et = new EmailTemplate(`${templateDirectory}/${directory}`, options)\n    if (locals === true) {\n      return callback(null, function (locals, dir, next) {\n        et.render(locals, function (err, result) {\n          result = result || {}\n          next(err, result.html, result.text)\n        })\n      })\n    }\n\n    et.render(locals, function (err, result) {\n      result = result || {}\n      callback(err, result.html, result.text)\n    })\n  }\n}\n\nexportable.EmailTemplate = EmailTemplate\nexportable.requires = requires\n\nexport default exportable\n"]}